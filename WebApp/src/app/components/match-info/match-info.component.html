<div class="match-info-container" *ngIf="!loading && match">
  
  <!-- League Header Component -->
  <app-league-header 
    [leagueId]="match.league.id"
    [leagueName]="match.league.name"
    [leagueRound]="match.league.round"
    [leagueSeason]="match.league.season">
  </app-league-header>

  <!-- General Match Card Component -->
  <app-general-match-card [realMatch]="match"></app-general-match-card>

  <!-- Extra Time and Penalties (if applicable) -->
  <div class="score-details" *ngIf="match.score && (match.score.extratime.home !== null || match.score.penalty.home !== null)">
    <div class="score-row" *ngIf="match.score.extratime.home !== null">
      <span class="score-label">Extra Time:</span>
      <span class="score-value">{{ match.score.extratime.home }} - {{ match.score.extratime.away }}</span>
    </div>
    <div class="score-row" *ngIf="match.score.penalty.home !== null">
      <span class="score-label">Penalties:</span>
      <span class="score-value">{{ match.score.penalty.home }} - {{ match.score.penalty.away }}</span>
    </div>
  </div>

  <!-- Match Highlights Video Section -->
  <div class="highlights-section" *ngIf="isFinished() && highlightsVideo && highlightsVideo.videoId">
    <div class="video-container" *ngIf="loadingVideo">
      <div class="video-loading">
        <div class="spinner"></div>
      </div>
    </div>
    <div class="video-wrapper" *ngIf="!loadingVideo && highlightsVideo && highlightsVideo.videoId">
      <iframe 
        [src]="getSafeUrl(highlightsVideo.embedUrl)" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen
        class="youtube-embed">
      </iframe>
    </div>
  </div>

  <!-- Match Events Section -->
  <app-match-events 
    *ngIf="match.events"
    [events]="match.events"
    [homeTeamId]="match.teams.home.id"
    [awayTeamId]="match.teams.away.id">
  </app-match-events>

  <!-- Statistics and Lineups Two-Column Layout -->
  <div class="stats-lineups-container">
    <!-- Match Statistics Section - Left Column (35%) -->
    <div class="stats-column">
      <app-match-statistics
        *ngIf="homeStatistics && awayStatistics"
        [homeStatistics]="homeStatistics"
        [awayStatistics]="awayStatistics"
        [isAdmin]="isAdmin"
        [isFinished]="isFinished()"
        [isUpdating]="isUpdating"
        (updateStatistics)="updateStatistics()">
      </app-match-statistics>
    </div>

    <!-- Match Lineups Section - Right Column (65%) -->
    <div class="lineups-column">
      <app-match-lineups
        *ngIf="match.lineups"
        [lineups]="match.lineups"
        [homeTeamId]="match.teams.home.id"
        [awayTeamId]="match.teams.away.id">
      </app-match-lineups>
    </div>
  </div>

</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading match information...</p>
</div>
