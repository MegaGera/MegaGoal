<div class="player-info-container container" *ngIf="!loading && player">
  <div class="player-info-layout">

    <!-- Player Header -->
    <app-player-header
      [player]="player"
      [playerAge]="playerAge"
      [playerBirthPlace]="playerBirthPlace">
    </app-player-header>

    <div 
      class="player-main-grid"
      *ngIf="(!statsLoading && playerStats) || hasTeams()">
      
      <!-- Player Stats Section -->
      <app-general-card
        *ngIf="!statsLoading && playerStats"
        customClass="player-stats-card">
        <div class="stats-grid">
          <app-basic-stat-card
            icon="üëÅÔ∏è"
            label="Views"
            [value]="playerStats.matches_viewed"
            [subValue]="playerStats.matches_startXI > 0 ? playerStats.matches_startXI + ' start XI' : null">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="‚öΩ"
            label="Goals"
            [value]="playerStats.total_goals"
            [subValue]="playerStats.matches_viewed ? playerStats.total_goals / playerStats.matches_viewed : 0">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="üéØ"
            label="Assists"
            [value]="playerStats.total_assists"
            [subValue]="playerStats.matches_viewed ? playerStats.total_assists / playerStats.matches_viewed : 0">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="‚úÖ"
            label="Wins"
            [value]="playerStats.wins"
            [subValue]="playerStats.win_percentage + '%'">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="ü§ù"
            label="Draws"
            [value]="playerStats.draws"
            [subValue]="playerStats.draw_percentage + '%'">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="‚ùå"
            label="Losses"
            [value]="playerStats.losses"
            [subValue]="playerStats.loss_percentage + '%'">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="üü®"
            label="Yellow Cards"
            [value]="playerStats.yellow_cards"
            [subValue]="playerStats.matches_viewed ? playerStats.yellow_cards / playerStats.matches_viewed : 0">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="üü•"
            label="Red Cards"
            [value]="playerStats.red_cards"
            [subValue]="playerStats.matches_viewed ? playerStats.red_cards / playerStats.matches_viewed : 0">
          </app-basic-stat-card>
          <app-basic-stat-card
            icon="üë•"
            label="Teams Watched"
            [value]="playerStats.different_teams_watched">
          </app-basic-stat-card>
        </div>
      </app-general-card>

      <!-- Teams and Seasons Section -->
      <app-general-card
        *ngIf="hasTeams()"
        customClass="teams-seasons-card">
        <div class="teams-card-header insights-card-header">
          <h3>üèÜ Teams & Seasons</h3>
        </div>
        <div class="teams-list">
          <app-team-row 
            *ngFor="let item of getTeamsAndSeasonsFlat()"
            [teamData]="item.team"
            [season]="item.season"
            [teamStats]="item.teamStats">
          </app-team-row>
        </div>
      </app-general-card>
    </div>

    <!-- No Teams Message -->
    <div class="no-teams-message" *ngIf="!loading && !hasTeams()">
      <p>No team information available for this player.</p>
    </div>

  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading player information...</p>
</div>

