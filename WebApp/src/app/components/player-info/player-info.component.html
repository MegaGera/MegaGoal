<div class="player-info-container container" *ngIf="!loading && player">
  <div class="player-info-layout">

    <!-- Player Header -->
    <app-player-header
      [player]="player"
      [playerAge]="playerAge"
      [playerBirthPlace]="playerBirthPlace">
    </app-player-header>

    <div 
      class="player-main-grid"
      *ngIf="(!statsLoading && playerStats) || hasTeams()">
      
      <!-- Player Stats Section -->
      <app-general-card
        *ngIf="!statsLoading && playerStats"
        customClass="player-stats-card">
        <div class="stats-grid">
          <app-player-stat
            icon="ðŸ‘ï¸"
            label="Matches Viewed"
            [value]="playerStats.matches_viewed"
            [subValue]="playerStats.matches_startXI > 0 ? playerStats.matches_startXI + ' start XI' : undefined">
          </app-player-stat>
          <app-player-stat
            icon="âš½"
            label="Goals"
            [value]="playerStats.total_goals">
          </app-player-stat>
          <app-player-stat
            icon="ðŸŽ¯"
            label="Assists"
            [value]="playerStats.total_assists">
          </app-player-stat>
          <app-player-stat
            icon="âœ…"
            label="Wins"
            [value]="playerStats.wins + ' - ' + playerStats.win_percentage + '%'">
          </app-player-stat>
          <app-player-stat
            icon="ðŸ¤"
            label="Draws"
            [value]="playerStats.draws + ' - ' + playerStats.draw_percentage + '%'">
          </app-player-stat>
          <app-player-stat
            icon="âŒ"
            label="Losses"
            [value]="playerStats.losses + ' - ' + playerStats.loss_percentage + '%'">
          </app-player-stat>
          <app-player-stat
            icon="ðŸŸ¨"
            label="Yellow Cards"
            [value]="playerStats.yellow_cards">
          </app-player-stat>
          <app-player-stat
            icon="ðŸŸ¥"
            label="Red Cards"
            [value]="playerStats.red_cards">
          </app-player-stat>
          <app-player-stat
            icon="ðŸ‘¥"
            label="Teams Watched"
            [value]="playerStats.different_teams_watched">
          </app-player-stat>
        </div>
      </app-general-card>

      <!-- Teams and Seasons Section -->
      <app-general-card
        *ngIf="hasTeams()"
        customClass="teams-seasons-card">
        <div class="teams-card-header">
          <h2 class="section-title">Teams & Seasons</h2>
        </div>
        <div class="teams-list">
          <app-team-row 
            *ngFor="let item of getTeamsAndSeasonsFlat()"
            [teamData]="item.team"
            [season]="item.season"
            [teamStats]="item.teamStats">
          </app-team-row>
        </div>
      </app-general-card>
    </div>

    <!-- No Teams Message -->
    <div class="no-teams-message" *ngIf="!loading && !hasTeams()">
      <p>No team information available for this player.</p>
    </div>

  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading player information...</p>
</div>

