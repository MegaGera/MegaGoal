<div class="match-row" [class.priority-match]="!showStatsBadge" [class.has-stats]="hasStatistics()" [class.not-started]="isNotStarted()">
  <a class="match-id" [routerLink]="['/app/match']" [queryParams]="{ id: match.fixture.id }" title="View match details">#{{ match.fixture.id }}</a>
  <div class="teams">
    <img [src]="'https://server.megamedia.megagera.com/megagoal/teams/team_' + match.teams.home.id + '.png'" 
         [alt]="match.teams.home.name" 
         class="team-icon"/>
    <span class="team-name">{{ match.teams.home.name }}</span>
    <span class="vs">{{ match.goals.home }} - {{ match.goals.away }}</span>
    <span class="team-name">{{ match.teams.away.name }}</span>
    <img [src]="'https://server.megamedia.megagera.com/megagoal/teams/team_' + match.teams.away.id + '.png'" 
         [alt]="match.teams.away.name" 
         class="team-icon"/>
  </div>
  <div class="actions">
    <span class="league">{{ match.league.name }}</span>
    <span class="date">{{ match.fixture.date | date: 'dd/MM/yyyy' }}</span>
    
    @if (match.usernames && match.usernames.length > 0) {
      <span class="usernames users" 
            [title]="match.usernames.join(', ')">
        @if (match.usernames.length === 1) {
          ðŸ‘¤ {{ match.usernames.length }}
        } @else {
          ðŸ‘¥ {{ match.usernames.length }}
        }
      </span>
    }
    
    @if (showStatsBadge && !isNotStarted()) {
      <span class="badge" [class.badge-success]="hasStatistics()" [class.badge-danger]="!hasStatistics()">
        {{ hasStatistics() ? 'âœ“ Stats' : 'âœ• No stats' }}
      </span>
      <span class="badge" [class.badge-success]="hasLineups()" [class.badge-danger]="!hasLineups()">
        {{ hasLineups() ? 'âœ“ Lineups' : 'âœ• No lineups' }}
      </span>
      <span class="badge" [class.badge-success]="hasEvents()" [class.badge-danger]="!hasEvents()">
        {{ hasEvents() ? 'âœ“ Events' : 'âœ• No events' }}
      </span>
    }
    
    @if (showLandingButton) {
      <button 
        class="btn btn-sm" 
        [class.btn-warning]="isMarkedForLanding" 
        [class.btn-outline-secondary]="!isMarkedForLanding"
        (click)="onToggleLanding()" 
        [disabled]="isMarking"
        [title]="isMarkedForLanding ? 'Remove from landing page' : 'Mark for landing page'">
        {{ isMarking ? '...' : (isMarkedForLanding ? 'â˜…' : 'â˜†') }}
      </button>
    }
    
    @if (showUpdateButton && !isNotStarted()) {
      <button 
        class="btn btn-sm btn-primary" 
        (click)="onUpdateStatistics()" 
        [disabled]="isUpdating">
        {{ isUpdating ? 'Updating...' : 'Update stats' }}
      </button>
      <button 
        class="btn btn-sm btn-primary" 
        (click)="onUpdateLineups()" 
        [disabled]="isUpdatingLineups">
        {{ isUpdatingLineups ? 'Updating...' : 'Update lineups' }}
      </button>
      <button 
        class="btn btn-sm btn-primary" 
        (click)="onUpdateEvents()" 
        [disabled]="isUpdatingEvents">
        {{ isUpdatingEvents ? 'Updating...' : 'Update events' }}
      </button>
    }
  </div>
</div>

