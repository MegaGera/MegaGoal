<div class="admin-container">
  <section class="fade-in">
    <h1 class="section-title">League Automation Management</h1>
    <p class="section-description">Configure automatic match updates for each league</p>
    
    <div class="leagues-list">
      @for (leaguesSetting of leaguesSettings; track $index) {
        <div class="league-row" [ngClass]="{
          'league-inactive': !leaguesSetting.is_active,
          'league-daily-update': leaguesSetting.is_active && leaguesSetting.daily_update
        }">
          <div class="league-info">
            <div class="league-header-info">
              <img 
                class="league-logo" 
                [src]="images.getRouteImageLeagueSm(leaguesSetting.league_id)"
                [alt]="leaguesSetting.league_name + ' logo'">
              <div class="league-text">
                <h3 class="league-name">{{leaguesSetting.league_name}}</h3>
                <span class="league-id">#{{leaguesSetting.league_id}}</span>
              </div>
            </div>
          </div>
          
          <div class="league-controls">
            <div class="control-group">
              <label class="control-label">Status</label>
              <div class="status-control">
                <label class="toggle-switch">
                  <input type="checkbox" 
                         [(ngModel)]="leaguesSetting.is_active"
                         (change)="changeIsActive(leaguesSetting.league_id, leaguesSetting.is_active)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Frequency</label>
              <div class="frequency-options" [class.disabled]="!leaguesSetting.is_active">
                <label class="frequency-option" *ngFor="let freq of [1, 3, 7, 30]">
                  <input type="radio" 
                         name="frequency{{$index}}" 
                         [value]="freq"
                         [(ngModel)]="leaguesSetting.update_frequency"
                         [disabled]="!leaguesSetting.is_active"
                         (change)="changeUpdateFrequency(leaguesSetting.league_id, freq)">
                  <span class="frequency-label">{{freq}}d</span>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Daily Updates</label>
              <div class="daily-update-control">
                <label class="toggle-switch small">
                  <input type="checkbox" 
                         [(ngModel)]="leaguesSetting.daily_update"
                         [disabled]="!leaguesSetting.is_active"
                         (change)="changeDailyUpdate(leaguesSetting.league_id, leaguesSetting.daily_update)">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>

          <div class="league-dates">
            <div class="date-item">
              <span class="date-label">Last Update</span>
              <span class="date-value">{{leaguesSetting.last_update | date:'dd/MM/yyyy'}}</span>
            </div>
            <div class="date-item">
              <span class="date-label">Next Match</span>
              <span class="date-value">{{leaguesSetting.next_match | date:'dd/MM/yyyy'}}</span>
            </div>
            <div class="date-item">
              <span class="date-label">Last Daily</span>
              <span class="date-value">{{leaguesSetting.last_daily_update ? (leaguesSetting.last_daily_update | date:'dd/MM HH:mm') : '-'}}</span>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="empty-state" *ngIf="leaguesSettings.length === 0">
      <div class="empty-state-icon">âš½</div>
      <h2 class="empty-state-title">No Leagues Configured</h2>
      <p class="empty-state-description">Leagues will appear here once they are added to the system.</p>
    </div>
  </section>
</div>